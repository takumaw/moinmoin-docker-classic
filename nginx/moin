server {
	listen 443;
	server_name _;

	ssl on;
	ssl_certificate /var/www/moin/certs/origin_certificate.pem;
	ssl_certificate_key /var/www/moin/certs/private_key.pem;
	
	access_log /var/www/moin/log/access.log;
	error_log /var/www/moin/log/error.log;

	root /var/www/moin/static;
	index moin.cgi index.html index.htm;

	location / {
		try_files $uri @uwsgi;
	}
	
	location ~ /moin_static/(.*) {
		root /;
		try_files /var/www/moin/static/moin_static/$1 /usr/local/lib/python2.7/dist-packages/MoinMoin/web/static/htdocs/$1 =404;
	}
	
	location @uwsgi {
		include uwsgi_params;
		uwsgi_pass unix:/usr/local/run/moin/moin.sock;
	}

	error_page 403 404 500 502 503 504 /static/error/error.html;
	error_page 404 /static/error/notfound.html;
}
